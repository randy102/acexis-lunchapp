(this["webpackJsonptraining-frontend-base"]=this["webpackJsonptraining-frontend-base"]||[]).push([[0],{397:function(e,t,a){e.exports=a(763)},418:function(e,t){},420:function(e,t){},453:function(e,t){},454:function(e,t){},510:function(e,t,a){},656:function(e,t,a){},751:function(e,t,a){},763:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),i=a.n(c),o=a(105),l=(a(52),a(21)),u=(a(53),a(11)),s=(a(54),a(23)),d=(a(39),a(4)),m=(a(27),a(7)),f=a(3),b=a(321),h=a(117),O=a.n(h),E=a(16),p=a(8);function v(){var e=Object(E.a)(["\n    query Login($name: String!, $password: String!){\n        login(name: $name, password: $password)\n    }\n"]);return v=function(){return e},e}var j=Object(p.a)(v()),g=a(214),S=a.n(g);function y(){if(C())try{return S.a.verify(C(),"12345"),!0}catch(e){return!1}return!1}function C(){return window.localStorage.getItem("token")}function w(e){return e?S.a.decode(C())[e]:S.a.decode(C())}function A(e){return O()("sha256").update(e).digest("hex")}function N(e){for(var t in e)if(""===e[t])return{isValid:!1,error:"".concat(t," field is empty!")};return{isValid:!0,error:""}}a(510);function $(){var e=Object(b.a)(j),t=Object(f.a)(e,2),a=t[0],c=t[1].data,i=Object(n.useState)(!1),h=Object(f.a)(i,2),O=h[0],E=h[1],p=Object(n.useState)(""),v=Object(f.a)(p,2),g=v[0],S=v[1],C=Object(n.useState)(""),$=Object(f.a)(C,2),M=$[0],k=$[1];if(Object(n.useEffect)((function(){var e;c&&(E(!1),"error"===c.login?(m.a.error("Login Fail!"),S(""),k("")):(e=c.login,window.localStorage.setItem("token",e)))}),[c]),y()){var D=w("role");return"ADMIN"===D||"MOD"===D?r.a.createElement(o.a,{to:"/admin"}):r.a.createElement(o.a,{to:"/app"})}return r.a.createElement("div",{id:"loginFormWrap"},r.a.createElement("h1",null,r.a.createElement(d.a,{type:"user"})," Login"),r.a.createElement(u.a,{className:"login-form",onSubmit:function(e){e.preventDefault();var t=N({name:g,password:M}),n=t.error;t.isValid?(E(!0),a({variables:{name:g,password:A(M)}})):m.a.error(n)}},r.a.createElement(u.a.Item,null,r.a.createElement(s.a,{prefix:r.a.createElement(d.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"User name...",value:g,onChange:function(e){return S(e.target.value)}})),r.a.createElement(u.a.Item,null,r.a.createElement(s.a.Password,{prefix:r.a.createElement(d.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Password...",value:M,onChange:function(e){return k(e.target.value)}})),r.a.createElement(u.a.Item,null,r.a.createElement(l.a,{type:"primary",htmlType:"submit",className:"login-form-button",loading:O},"Log in"))))}a(343);var M=a(207),k=(a(344),a(58)),D=a(45);function I(){return r.a.createElement("div",null,r.a.createElement(M.a.Header,{style:{position:"fixed",zIndex:1,width:"100%",height:40}},r.a.createElement(k.a,{theme:"light",mode:"horizontal",style:{lineHeight:"40px",float:"right"}},r.a.createElement(k.a.SubMenu,{title:r.a.createElement("span",{className:"submenu-title-wrapper"},r.a.createElement(d.a,{type:"setting"}),"Options")},r.a.createElement(k.a.Item,{key:"setting:1"},r.a.createElement(D.b,{to:"/",replace:!0,onClick:function(){window.localStorage.removeItem("token")}},r.a.createElement(d.a,{type:"logout"}),"Log out")),r.a.createElement(k.a.Item,{key:"setting:2"},r.a.createElement(D.b,{to:"/app/password",replace:!0},r.a.createElement(d.a,{type:"lock"}),"Change Password")),r.a.createElement(k.a.Item,{key:"setting:3"},r.a.createElement(D.b,{to:"/app",replace:!0},r.a.createElement(d.a,{type:"home"}),"App")),r.a.createElement(k.a.Item,{key:"setting:4"},r.a.createElement(D.b,{to:"/admin",replace:!0},r.a.createElement(d.a,{type:"user"}),"Admin"))))))}var x=a(373);function U(){var e=Object(E.a)(["\n    mutation ChangePassword($old: String!, $password: String!){\n        changePassword(old: $old, password: $password){\n            success\n            error\n        }\n    }\n"]);return U=function(){return e},e}function R(){var e=Object(E.a)(["\n    mutation UpdateUser($id: String!, $data: String!){\n        updateUser(id:$id, data: $data){\n            _id\n        }\n    }\n"]);return R=function(){return e},e}function _(){var e=Object(E.a)(["\n    mutation DeleteUser($id: String!){\n        deleteUser(id: $id){\n            name\n        }\n    }\n"]);return _=function(){return e},e}function L(){var e=Object(E.a)(["\n    mutation AddUser($user: AddUserInput){\n        addUser(user: $user){\n            _id\n        }\n    }\n"]);return L=function(){return e},e}function T(){var e=Object(E.a)(["\n    query Users($site: String){\n        users(site: $site){\n            _id\n            name\n            status\n            role\n            site{\n                _id\n                name\n            }\n        }\n    }\n"]);return T=function(){return e},e}var G=Object(p.a)(T()),P=Object(p.a)(L()),B=Object(p.a)(_()),V=Object(p.a)(R()),q=Object(p.a)(U());function z(){var e=Object(n.useState)(""),t=Object(f.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(""),o=Object(f.a)(i,2),b=o[0],h=o[1],O=Object(n.useState)(!1),E=Object(f.a)(O,2),p=E[0],v=E[1],j=Object(x.a)(q),g=Object(f.a)(j,2),S=g[0],y=g[1].data;function C(e){e.preventDefault(),v(!0),S({variables:{old:A(a),password:A(b)}})}return Object(n.useEffect)((function(){y&&(v(!1),y.changePassword.success?m.a.success(y.changePassword.success):m.a.error(y.changePassword.error),h(""),c(""))}),[y]),r.a.createElement("div",{style:{width:300,margin:"50px auto"}},r.a.createElement(u.a,{onSubmit:C},r.a.createElement(u.a.Item,null,r.a.createElement(s.a.Password,{prefix:r.a.createElement(d.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),value:a,onChange:function(e){return c(e.target.value)},placeholder:"Current password..."})),r.a.createElement(u.a.Item,null,r.a.createElement(s.a.Password,{prefix:r.a.createElement(d.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),value:b,onChange:function(e){return h(e.target.value)},placeholder:"New password..."})),r.a.createElement(u.a.Item,null,r.a.createElement(l.a,{loading:p,onClick:C,block:!0,type:"primary"},"Submit"))))}a(112);var H=a(57),F=(a(347),a(349));function K(){var e=Object(E.a)(["\n    mutation UpdateOrder($id: String!, $name: String!){\n        updateOrder(id: $id, name: $name){\n            name\n        }\n    }\n"]);return K=function(){return e},e}function Q(){var e=Object(E.a)(["\n    mutation AddOrderUser( $quantity: Int!, $item: String!, $note: String!){\n        addOrderUser(quantity: $quantity, item: $item, note: $note){\n            success\n            error\n        }\n    }\n"]);return Q=function(){return e},e}function Y(){var e=Object(E.a)(["\n    mutation AddOrder($user: String!, $quantity: Int!, $item: String!, $note: String!){\n        addOrder(user: $user, quantity: $quantity, item: $item, note: $note)\n    }\n"]);return Y=function(){return e},e}function W(){var e=Object(E.a)(["\n    mutation DeleteOrder($id: String!){\n        deleteOrder(id: $id)\n    }\n"]);return W=function(){return e},e}function J(){var e=Object(E.a)(["\n    mutation ConfirmOrder($id: String!){\n        confirmOrder(id: $id){\n            success\n            error\n        }\n    }\n"]);return J=function(){return e},e}function X(){var e=Object(E.a)(["\n    query{\n        orderOfUser{\n            _id\n            item\n            note\n            quantity\n            confirmed\n            created_date\n        }\n    }\n"]);return X=function(){return e},e}function Z(){var e=Object(E.a)(["\n    query {\n        orders{\n            _id\n            item\n            user\n            site\n            confirmed\n            note\n            quantity\n            created_date\n        }\n    }\n"]);return Z=function(){return e},e}var ee=Object(p.a)(Z()),te=Object(p.a)(X()),ae=Object(p.a)(J()),ne=Object(p.a)(W()),re=Object(p.a)(Y()),ce=Object(p.a)(Q()),ie=(Object(p.a)(K()),a(210));function oe(e){var t=Object(n.useState)(void 0),a=Object(f.a)(t,2),c=a[0],i=a[1];return c&&(e.loading?c.showLoadingOverlay():e.error?console.error(e.error):(c.hideOverlay(),0==Object.values(e.data)[0].length&&c.showNoRowsOverlay())),r.a.createElement("div",{className:"ag-theme-balham",style:{height:e.height||"450px",width:"100%"}},r.a.createElement(ie.AgGridReact,{rowSelection:e.multiple?"multiple":"single",onGridReady:function(t){t.api.sizeColumnsToFit(),i(t.api),e.setGridApi&&e.setGridApi(t.api)},columnDefs:e.columnDefs,rowData:e.data?Object.values(e.data)[0]:[],onRowSelected:e.onRowClicked||void 0,pagination:e.pagination||!1,paginationPageSize:e.pageSize||void 0,defaultColDef:{filter:!0,sortable:!0,resizable:!0}}))}function le(e){var t=e.data,a=e.loading,n=e.error,c={setGridApi:e.setOrderApi,loading:a,error:n,columnDefs:[{checkboxSelection:!0,width:60},{headerName:"Item",field:"item"},{headerName:"Quantity",field:"quantity"},{headerName:"Note",field:"note"},{headerName:"Booked Date",field:"created_date"}],data:t,pagination:!1,height:e.height};return r.a.createElement(oe,c)}a(151);var ue=a(84),se=(a(76),a(38));function de(e){return r.a.createElement("div",{className:"user-btn"},r.a.createElement(l.a,{type:"primary",onClick:e.showModal},e.btnName),r.a.createElement(se.a,{title:e.btnName,visible:e.visible,onOk:e.handleOk,confirmLoading:e.confirmLoading,onCancel:e.handleCancel},e.children))}function me(e){var t=e.gridApi,a=e.refetch,c=e.orderApi,i=Object(n.useState)(!1),o=Object(f.a)(i,2),l=o[0],d=o[1],b=Object(n.useState)(!1),h=Object(f.a)(b,2),O=h[0],E=h[1],p=Object(n.useState)(""),v=Object(f.a)(p,2),j=v[0],g=v[1],S=Object(n.useState)(""),y=Object(f.a)(S,2),C=y[0],w=y[1],A=Object(n.useState)(1),N=Object(f.a)(A,2),$=N[0],M=N[1],k=Object(x.a)(ce),D=Object(f.a)(k,2),I=D[0],U=D[1].data;Object(n.useEffect)((function(){U&&U.addOrderUser.error&&m.a.error(U.addOrderUser.error),a(),E(!1),d(!1),M(1),w("")}),[U]);var R={showModal:function(){if(c.getDisplayedRowCount()>0)m.a.error("You have ordered already!");else{var e=t.getSelectedRows();if(e.length>0){if((e=e[0]).total-e.booked<=0)return void m.a.error("Item out of stock!");g(e._id),d(!0)}else m.a.error("Must choose an Item!")}},handleCancel:function(){d(!1)},handleOk:function(){E(!0),I({variables:{quantity:$,item:j,note:C}})},btnName:"Add Order",visible:l,confirmLoading:O};return r.a.createElement(de,R,r.a.createElement(u.a,null,r.a.createElement("b",null,"Quantity: "),r.a.createElement(ue.a,{min:1,max:1,value:$,onChange:function(e){return M(e)},placeholder:"Quantity..."}),r.a.createElement("div",{style:{margin:"10px 0"}}),r.a.createElement(s.a,{type:"text",onChange:function(e){return w(e.target.value)},value:C,placeholder:"Note..."})))}function fe(){var e=Object(E.a)(["\n    subscription Menu($site: String){\n        menuPublished(site: $site){\n            _id\n        }\n    }\n"]);return fe=function(){return e},e}function be(){var e=Object(E.a)(["\n    mutation UpdateMenu($id: String!, $status: MenuStatus!, $name: String!) {\n        updateMenu(id: $id, status: $status, name: $name) {\n            _id\n        }\n    }\n"]);return be=function(){return e},e}function he(){var e=Object(E.a)(["\n    mutation DeleteMenu($id: String!) {\n        deleteMenu(id: $id) {\n            name\n        }\n    }\n"]);return he=function(){return e},e}function Oe(){var e=Object(E.a)(["\n    query {\n        userMenu {\n            _id\n            name\n            booked\n            total\n        }\n    }\n"]);return Oe=function(){return e},e}function Ee(){var e=Object(E.a)(["\n    query Menus($site: String!) {\n        menus(site: $site) {\n            _id\n            site {\n                _id\n                name\n            }\n            name\n            status\n            created_date\n        }\n    }\n"]);return Ee=function(){return e},e}function pe(){var e=Object(E.a)(["\n    mutation AddMenu($name: String!, $site: String!, $status: MenuStatus!) {\n        addMenu(name: $name, site: $site, status: $status) {\n            _id\n        }\n    }\n"]);return pe=function(){return e},e}var ve=Object(p.a)(pe()),je=Object(p.a)(Ee()),ge=Object(p.a)(Oe()),Se=Object(p.a)(he()),ye=Object(p.a)(be()),Ce=Object(p.a)(fe());function we(e){var t=e.curMenu,a=e.setGridApi,c=e.doRefetch,i=e.height,o=Object(F.a)(ge),l=o.data,u=o.loading,s=o.error,d=o.refetch;Object(n.useEffect)((function(){d()}),[c,t]);var m={setGridApi:a,columnDefs:[{checkboxSelection:!0,width:60},{headerName:"Name",field:"name"},{headerName:"Booked",field:"booked"},{headerName:"Total",field:"total"}],data:l,loading:u,error:s,height:i};return r.a.createElement(oe,m)}function Ae(e){var t=e.orderRefetch,a=e.menuRefetch,c=e.orderApi,i=Object(n.useState)(void 0),o=Object(f.a)(i,2),l=o[0],u=o[1],s=Object(n.useState)(!0),d=Object(f.a)(s,2),m=d[0],b=d[1];function h(){b(!m),t()}return Object(n.useEffect)((function(){h()}),[a]),r.a.createElement("div",null,r.a.createElement(me,{gridApi:l,refetch:h,orderApi:c}),r.a.createElement(we,{setGridApi:u,doRefetch:m,height:"400px"}))}a(188);var Ne=a(103);function $e(e){return r.a.createElement("div",{className:"user-btn"},r.a.createElement(Ne.a,{title:e.confirmTitle,onConfirm:e.handleDelete,okText:"Yes",cancelText:"No"},r.a.createElement(l.a,{type:"danger"},e.btnName),r.a.createElement(se.a,{title:"Deleting...",visible:e.visible,maskClosable:!1},r.a.createElement(d.a,{type:"loading"}))))}function Me(e){var t=e.gridApi,a=e.refetch,c=Object(n.useState)(!1),i=Object(f.a)(c,2),o=i[0],l=i[1],u=Object(x.a)(ne),s=Object(f.a)(u,2),d=s[0],b=s[1].data;Object(n.useEffect)((function(){a(),l(!1)}),[b]);var h={visible:o,confirmTitle:"Are you sure delete this Order?",btnName:"Delete Order",handleDelete:function(){var e=t.getSelectedRows();if(e.length>0){var a=e[0]._id;d({variables:{id:a}}),l(!0)}else m.a.error("Must choose an Order!")}};return r.a.createElement($e,h)}function ke(e){return r.a.createElement("div",{className:"user-btn"},r.a.createElement(Ne.a,{title:e.confirmTitle,onConfirm:e.handleConfirm,okText:"Yes",cancelText:"No"},r.a.createElement(l.a,{type:"default"},e.btnName),r.a.createElement(se.a,{title:"Confirming...",visible:e.visible,maskClosable:!1},r.a.createElement(d.a,{type:"loading"}))))}function De(e){var t=e.gridApi,a=e.refetch,c=Object(n.useState)(!1),i=Object(f.a)(c,2),o=i[0],l=i[1],u=Object(x.a)(ae),s=Object(f.a)(u,2),d=s[0],b=s[1].data;Object(n.useEffect)((function(){console.log({data:b}),b&&b.confirmOrder.success&&m.a.success(b.confirmOrder.success),b&&b.confirmOrder.error&&m.a.error(b.confirmOrder.error),a(),l(!1)}),[b]);var h={visible:o,confirmTitle:"Are you sure confirm this Order?",btnName:"Confirm Order",handleConfirm:function(){var e=t.getSelectedRows();if(e.length>0){var a=e[0]._id;d({variables:{id:a}}),l(!0)}else m.a.error("Must choose an Order!")}};return r.a.createElement(ke,h)}function Ie(){var e=Object(n.useState)(void 0),t=Object(f.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(!1),o=Object(f.a)(i,2),l=o[0],u=o[1],s=Object(F.a)(te),m=s.data,b=s.loading,h=s.error,O=s.refetch,E={data:m,loading:b,error:h,setOrderApi:c};return r.a.createElement("div",null,r.a.createElement(H.a,null,r.a.createElement("h1",null,r.a.createElement(d.a,{type:"menu"})," Menu")),r.a.createElement(Ae,{orderApi:a,orderRefetch:function(){return O()},menuRefetch:l}),r.a.createElement(H.a,null,r.a.createElement("h1",null,r.a.createElement(d.a,{type:"profile"})," Ordered")),r.a.createElement(Me,{gridApi:a,refetch:function(){O(),u(!l)}}),r.a.createElement(De,{gridApi:a,refetch:function(){O()}}),r.a.createElement(le,Object.assign({},E,{height:"200px"})))}a(654);var xe=a(383),Ue=a(374);function Re(){var e=Object(Ue.a)(Ce,{variables:{site:y()?w("site"):""}}).data;return e&&e.menuPublished&&y()&&xe.a.open({message:"Menu is published! Ordering is available now!",icon:r.a.createElement(d.a,{type:"notification"}),placement:"bottomLeft"}),r.a.createElement("div",null)}function _e(e){return r.a.createElement("div",{id:"AppRouteWrap"},r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"".concat(e.match.url,"/password"),component:z}),r.a.createElement(o.b,{path:"".concat(e.match.url,"/order"),component:Ie}),r.a.createElement(o.b,{path:"".concat(e.match.url,"/"),component:Ie})),r.a.createElement(Re,null))}a(656);function Le(e){return r.a.createElement("div",null,r.a.createElement(I,null),r.a.createElement(_e,e))}a(187);var Te=a(104);function Ge(){var e=Object(E.a)(["\n    mutation UpdateSite($id: String!, $name: String!){\n        updateSite(id:$id, name:$name){\n            name\n        }\n    }\n"]);return Ge=function(){return e},e}function Pe(){var e=Object(E.a)(["\n    mutation DeleteSite($id: String!){\n        deleteSite(id: $id){\n            name\n        }\n    }\n"]);return Pe=function(){return e},e}function Be(){var e=Object(E.a)(["\n    mutation AddSite($name: String!){\n        addSite(name: $name){\n            _id\n        }\n    }\n"]);return Be=function(){return e},e}function Ve(){var e=Object(E.a)(["\n    query{\n        sites{\n            _id\n            name\n            count\n        }\n    }\n"]);return Ve=function(){return e},e}var qe=Object(p.a)(Ve()),ze=Object(p.a)(Be()),He=Object(p.a)(Pe()),Fe=Object(p.a)(Ge());function Ke(e){var t=e.setGridApi,a=e.doRefetch,c=Object(F.a)(qe),i=c.data,o=c.loading,l=c.error,u=c.refetch;Object(n.useEffect)((function(){u()}),[a]);var s={error:l,loading:o,data:i,setGridApi:t,columnDefs:[{checkboxSelection:!0,width:20},{headerName:"Name",field:"name",sortable:!0},{headerName:"Members",field:"count",sortable:!0}]};return r.a.createElement(oe,s)}function Qe(e){var t=e.refetch,a=Object(n.useState)(!1),c=Object(f.a)(a,2),i=c[0],o=c[1],d=Object(n.useState)(!1),b=Object(f.a)(d,2),h=b[0],O=b[1],E=Object(n.useState)(""),p=Object(f.a)(E,2),v=p[0],j=p[1],g=Object(x.a)(ze),S=Object(f.a)(g,2),y=S[0],C=S[1].data;return Object(n.useEffect)((function(){t(),O(!1),o(!1),j("")}),[C]),r.a.createElement("div",{className:"user-btn"},r.a.createElement(l.a,{type:"primary",onClick:function(){o(!0)}},"Add Site"),r.a.createElement(se.a,{title:"Add Site",visible:i,onOk:function(){var e=N({name:v}),t=e.isValid,a=e.error;t?(O(!0),y({variables:{name:v}})):m.a.error(a)},confirmLoading:h,onCancel:function(){o(!1)}},r.a.createElement("form",null,r.a.createElement(u.a.Item,null,r.a.createElement(s.a,{type:"text",onChange:function(e){return j(e.target.value)},value:v,placeholder:"Site name..."})))))}function Ye(e){var t=e.gridApi,a=e.refetch,c=Object(n.useState)(!1),i=Object(f.a)(c,2),o=i[0],u=i[1],s=Object(x.a)(He),b=Object(f.a)(s,2),h=b[0],O=b[1].data;return Object(n.useEffect)((function(){a(),u(!1)}),[O]),r.a.createElement("div",{className:"user-btn"},r.a.createElement(Ne.a,{title:"Are you sure delete this Site? This action will delete all the user of this Site!",onConfirm:function(){var e=t.getSelectedRows();if(e.length>0){var a=e[0]._id;h({variables:{id:a}}),u(!0)}else m.a.error("Must choose a Site!")},okText:"Yes",cancelText:"No"},r.a.createElement(l.a,{type:"danger"},"Delete Site"),r.a.createElement(se.a,{title:"Deleting...",visible:o,maskClosable:!1},r.a.createElement(d.a,{type:"loading"}))))}function We(e){var t=e.gridApi,a=e.refetch,c=Object(n.useState)(!1),i=Object(f.a)(c,2),o=i[0],d=i[1],b=Object(n.useState)(!1),h=Object(f.a)(b,2),O=h[0],E=h[1],p=Object(n.useState)(""),v=Object(f.a)(p,2),j=v[0],g=v[1],S=Object(x.a)(Fe),y=Object(f.a)(S,2),C=y[0],w=y[1].data,A=Object(n.useState)(""),$=Object(f.a)(A,2),M=$[0],k=$[1];return Object(n.useEffect)((function(){a(),d(!1),E(!1),g("")}),[w]),r.a.createElement("div",{className:"user-btn"},r.a.createElement(l.a,{type:"ghost",onClick:function(){var e=t.getSelectedRows();e.length>0?(e=e[0],g(e.name),k(e._id),d(!0)):m.a.error("Must choose a Site!")}},"Edit User"),r.a.createElement(se.a,{title:"Edit User",visible:o,onOk:function(){var e=N({name:j}),t=e.isValid,a=e.error;t?(E(!0),C({variables:{id:M,name:j}})):m.a.error(a)},confirmLoading:O,onCancel:function(){return d(!1)}},r.a.createElement("form",null,r.a.createElement(u.a.Item,null,r.a.createElement(s.a,{type:"text",onChange:function(e){return g(e.target.value)},value:j,placeholder:"Site name..."})))))}function Je(){var e=Object(n.useState)(void 0),t=Object(f.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(!0),o=Object(f.a)(i,2),l=o[0],u=o[1];function s(){u(!l)}return"MOD"===w("role")?r.a.createElement(Te.a,{status:"403",title:"403",subTitle:"Sorry, you are not authorized to access this page."}):r.a.createElement("div",null,r.a.createElement(H.a,null,r.a.createElement("h1",null,r.a.createElement(d.a,{type:"apartment"})," Site")),r.a.createElement(Qe,{refetch:s}),r.a.createElement(Ye,{gridApi:a,refetch:s}),r.a.createElement(We,{gridApi:a,refetch:s}),r.a.createElement(Ke,{setGridApi:c,doRefetch:l}))}var Xe=a(133);function Ze(e){var t=e.doRefetch,a=e.setGridApi;var c,i=Object(F.a)(G,{variables:{site:""}}),o=i.data,l=i.loading,u=i.error,s=i.refetch;return Object(n.useEffect)((function(){s()}),[t]),l?r.a.createElement("div",null,r.a.createElement(se.a,{title:"Loading...",visible:!0,maskClosable:!1},r.a.createElement(d.a,{type:"loading"}))):u?r.a.createElement("div",null,"Error"):r.a.createElement("div",null,r.a.createElement("div",{className:"ag-theme-balham",style:{height:"300px",width:"100%"}},r.a.createElement(ie.AgGridReact,{onGridReady:function(e){e.api.sizeColumnsToFit(),a(e.api)},rowSelection:"multiple",columnDefs:[{checkboxSelection:!0,width:30},{headerName:"Name",field:"name",sortable:!0},{headerName:"Site",field:"site",sortable:!0},{headerName:"Role",field:"role",sortable:!0},{headerName:"Status",field:"status",sortable:!0}],rowData:(c=o.users,c.map((function(e){var t=Object(Xe.a)({},e);return t.site=e.site.name,t.siteId=e.site._id,t})))})))}a(116);var et=a(33),tt=et.a.Option;function at(e){var t=Object(F.a)(qe),a=t.loading,n=t.error,c=t.data;return a?r.a.createElement("div",null,r.a.createElement(et.a,{name:"site",placeholder:"Choose site...",suffixIcon:r.a.createElement(d.a,{type:"loading"})})):(n&&console.error(n),r.a.createElement("div",null,r.a.createElement(et.a,{onChange:function(t){return e.setSite(t)},name:"site",placeholder:"Choose site...",value:e.site||void 0},function(e){return e.sites.map((function(e){return r.a.createElement(tt,{key:e._id,value:e._id},e.name)}))}(c))))}var nt=et.a.Option;function rt(e){var t=e.refetch,a=Object(n.useState)(!1),c=Object(f.a)(a,2),i=c[0],o=c[1],d=Object(n.useState)(!1),b=Object(f.a)(d,2),h=b[0],O=b[1],E=Object(n.useState)(""),p=Object(f.a)(E,2),v=p[0],j=p[1],g=Object(n.useState)(""),S=Object(f.a)(g,2),y=S[0],C=S[1],w=Object(n.useState)(""),$=Object(f.a)(w,2),M=$[0],k=$[1],D=Object(n.useState)(""),I=Object(f.a)(D,2),U=I[0],R=I[1],_=Object(x.a)(P),L=Object(f.a)(_,2),T=L[0],G=L[1].data;return Object(n.useEffect)((function(){t(),O(!1),o(!1),j(""),C(""),k(""),R("")}),[G]),r.a.createElement("div",{className:"user-btn"},r.a.createElement(l.a,{type:"primary",onClick:function(){o(!0)}},"Add User"),r.a.createElement(se.a,{title:"Add User",visible:i,onOk:function(){var e=N({name:M,password:U,role:v,site:y}),t=e.isValid,a=e.error;t?(O(!0),T({variables:{user:{name:M,password:A(U),status:"ACTIVE",role:v,site:y}}})):m.a.error(a)},confirmLoading:h,onCancel:function(){o(!1),m.a.error("Not succeed!")}},r.a.createElement("form",null,r.a.createElement(u.a.Item,null,r.a.createElement(s.a,{type:"text",onChange:function(e){return k(e.target.value)},value:M,placeholder:"User name..."})),r.a.createElement(u.a.Item,null,r.a.createElement(s.a.Password,{onChange:function(e){return R(e.target.value)},value:U,placeholder:"Password..."})),r.a.createElement(u.a.Item,null,r.a.createElement(et.a,{value:v,onChange:function(e){return j(e)},name:"role",placeholder:"Choose role..."},r.a.createElement(nt,{value:"ADMIN"},"Admin"),r.a.createElement(nt,{value:"MOD"},"Mod"),r.a.createElement(nt,{value:"USER"},"User"))),r.a.createElement(u.a.Item,null,r.a.createElement(at,{site:y,setSite:C})))))}function ct(e){var t=e.gridApi,a=e.refetch,c=Object(n.useState)(!1),i=Object(f.a)(c,2),o=i[0],u=i[1],s=Object(x.a)(B),b=Object(f.a)(s,2),h=b[0],O=b[1].data;return Object(n.useEffect)((function(){u(!1),a()}),[O]),r.a.createElement("div",{className:"user-btn"},r.a.createElement(Ne.a,{title:"Are you sure delete this User?",onConfirm:function(){var e=t.getSelectedRows();if(e.length>0){var a=e[0]._id;h({variables:{id:a}}),u(!0)}else m.a.error("Must choose a User!")},okText:"Yes",cancelText:"No"},r.a.createElement(l.a,{type:"danger"},"Delete User"),r.a.createElement(se.a,{title:"Deleting...",visible:o,maskClosable:!1},r.a.createElement(d.a,{type:"loading"}))))}var it=et.a.Option;function ot(e){var t=e.gridApi,a=e.refetch,c=Object(n.useState)(!1),i=Object(f.a)(c,2),o=i[0],d=i[1],b=Object(n.useState)(!1),h=Object(f.a)(b,2),O=h[0],E=h[1],p=Object(n.useState)(""),v=Object(f.a)(p,2),j=v[0],g=v[1],S=Object(n.useState)(""),y=Object(f.a)(S,2),C=y[0],w=y[1],N=Object(n.useState)(""),$=Object(f.a)(N,2),M=$[0],k=$[1],D=Object(n.useState)(""),I=Object(f.a)(D,2),U=I[0],R=I[1],_=Object(n.useState)(""),L=Object(f.a)(_,2),T=L[0],G=L[1],P=Object(n.useState)(""),B=Object(f.a)(P,2),q=B[0],z=B[1],H=Object(x.a)(V),F=Object(f.a)(H,2),K=F[0],Q=F[1].data;return Object(n.useEffect)((function(){a(),d(!1),E(!1),G("")}),[Q]),r.a.createElement("div",{className:"user-btn"},r.a.createElement(l.a,{type:"ghost",onClick:function(){var e=t.getSelectedRows();e.length>0?(e=e[0],g(e.role),w(e.siteId),k(e.status),R(e.name),z(e._id),d(!0)):m.a.error("Must choose a User!")}},"Edit User"),r.a.createElement(se.a,{title:"Edit User",visible:o,onOk:function(){E(!0);var e={site:C,role:j,status:M};""!==T&&(e=Object(Xe.a)({},e,{password:A(T)})),K({variables:{id:q,data:JSON.stringify(e)}})},confirmLoading:O,onCancel:function(){return d(!1)}},r.a.createElement("form",null,r.a.createElement(u.a.Item,null,r.a.createElement(s.a,{value:U,disabled:!0})),r.a.createElement(u.a.Item,null,r.a.createElement(s.a.Password,{placeholder:"Password...",onChange:function(e){return G(e.target.value)},value:T})),r.a.createElement(u.a.Item,null,r.a.createElement(et.a,{onChange:function(e){return g(e)},placeholder:"Choose role...",value:j},r.a.createElement(it,{value:"ADMIN"},"Admin"),r.a.createElement(it,{value:"MOD"},"Mod"),r.a.createElement(it,{value:"USER"},"User"))),r.a.createElement(u.a.Item,null,r.a.createElement(at,{site:C,setSite:w})),r.a.createElement(u.a.Item,null,r.a.createElement(et.a,{onChange:function(e){return k(e)},value:M},r.a.createElement(it,{value:"ACTIVE"},"Active"),r.a.createElement(it,{value:"BLOCKED"},"Blocked"))))))}function lt(){var e=Object(n.useState)(void 0),t=Object(f.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(!0),o=Object(f.a)(i,2),l=o[0],u=o[1];function s(){u(!l)}return"MOD"===w("role")?r.a.createElement(Te.a,{status:"403",title:"403",subTitle:"Sorry, you are not authorized to access this page."}):r.a.createElement("div",null,r.a.createElement(H.a,null,r.a.createElement("h1",null,r.a.createElement(d.a,{type:"user"})," User")),r.a.createElement(rt,{refetch:s}),r.a.createElement(ct,{gridApi:a,refetch:s}),r.a.createElement(ot,{gridApi:a,refetch:s}),r.a.createElement(Ze,{setGridApi:c,doRefetch:l}))}a(256);var ut=a(134),st=(a(257),a(88));function dt(){var e=Object(E.a)(["\n    mutation DeleteShop($id: String!){\n        deleteShop(id: $id){\n            name\n        }\n    }\n"]);return dt=function(){return e},e}function mt(){var e=Object(E.a)(["\n    mutation UpdateShop($id: String!, $name: String!){\n        updateShop(id: $id, name: $name){\n            name\n        }\n    }\n"]);return mt=function(){return e},e}function ft(){var e=Object(E.a)(["\n    mutation AddShop($name: String!){\n        addShop(name: $name){\n            _id\n        }\n    }\n"]);return ft=function(){return e},e}function bt(){var e=Object(E.a)(["\n    query{\n        shops{\n            _id\n            name\n            items\n        }\n    }\n"]);return bt=function(){return e},e}function ht(){var e=Object(E.a)(["\n    query{\n        shops{\n            _id\n            name\n        }\n    }\n"]);return ht=function(){return e},e}var Ot=Object(p.a)(ht()),Et=(Object(p.a)(bt()),Object(p.a)(ft())),pt=Object(p.a)(mt()),vt=Object(p.a)(dt());function jt(e){var t=e.setGridApi,a=e.doRefetch,c=e.handleClick,i=Object(F.a)(Ot),o=i.data,l=i.loading,u=i.error,s=i.refetch;Object(n.useEffect)((function(){s()}),[a]);var d={columnDefs:[{checkboxSelection:!0,width:30},{headerName:"Name",field:"name",sortable:!0}],data:o,setGridApi:t,loading:l,error:u,onRowClicked:c};return r.a.createElement("div",null,r.a.createElement(oe,d))}function gt(e){var t=e.refetch,a=e.gridApi,c=e.setCurShop,i=Object(n.useState)(!1),o=Object(f.a)(i,2),l=o[0],u=o[1],s=Object(x.a)(vt),d=Object(f.a)(s,2),b=d[0],h=d[1].data;Object(n.useEffect)((function(){t(),u(!1),c("")}),[h]);var O={visible:l,confirmTitle:"Are you sure delete this Shop? This action will delete all dishes of this Shop!",btnName:"Delete Shop",handleDelete:function(){var e=a.getSelectedRows();if(e.length>0){var t=e[0]._id;b({variables:{id:t}}),u(!0)}else m.a.error("Must choose a Shop!")}};return r.a.createElement($e,O)}function St(e){return r.a.createElement("div",{className:"user-btn"},r.a.createElement(l.a,{type:"ghost",onClick:e.handleEdit},e.btnName),r.a.createElement(se.a,{title:e.btnName,visible:e.visible,onOk:e.handleOk,confirmLoading:e.confirmLoading,onCancel:function(){return e.setVisible(!1)}},e.children))}function yt(e){var t=e.gridApi,a=e.refetch,c=Object(n.useState)(!1),i=Object(f.a)(c,2),o=i[0],l=i[1],d=Object(n.useState)(!1),b=Object(f.a)(d,2),h=b[0],O=b[1],E=Object(n.useState)(""),p=Object(f.a)(E,2),v=p[0],j=p[1],g=Object(x.a)(pt),S=Object(f.a)(g,2),y=S[0],C=S[1].data,w=Object(n.useState)(""),A=Object(f.a)(w,2),$=A[0],M=A[1];Object(n.useEffect)((function(){a(),l(!1),O(!1),j("")}),[C]);var k={visible:o,handleEdit:function(){var e=t.getSelectedRows();e.length>0?(e=e[0],j(e.name),M(e._id),l(!0)):m.a.error("Must choose a User!")},handleOk:function(){var e=N({name:v}),t=e.isValid,a=e.error;t?(O(!0),y({variables:{id:$,name:v}})):m.a.error(a)},confirmLoading:h,setVisible:l,btnName:"Edit Shop"};return r.a.createElement(St,k,r.a.createElement("form",null,r.a.createElement(u.a.Item,null,r.a.createElement(s.a,{type:"text",onChange:function(e){return j(e.target.value)},value:v,placeholder:"Shop name..."}))))}function Ct(){var e=Object(E.a)(["\n    mutation UpdateDish($id: String!, $name: String!){\n        updateDish(id: $id, name: $name){\n            name\n        }\n    }\n"]);return Ct=function(){return e},e}function wt(){var e=Object(E.a)(["\n    mutation AddDish($shop: String!, $name: String!){\n        addDish(shop: $shop, name: $name){\n            _id\n        }\n    }\n"]);return wt=function(){return e},e}function At(){var e=Object(E.a)(["\n    mutation DeleteDish($id: String!){\n        deleteDish(id: $id){\n            name\n        }\n    }\n"]);return At=function(){return e},e}function Nt(){var e=Object(E.a)(["\n    query Dishes($shop: String) {\n        dishes(shop: $shop){\n            _id\n            name\n        }\n    }\n"]);return Nt=function(){return e},e}var $t=Object(p.a)(Nt()),Mt=Object(p.a)(At()),kt=Object(p.a)(wt()),Dt=Object(p.a)(Ct());function It(e){var t=e.curShop,a=e.setGridApi,c=e.doRefetch,i=e.multiple,o=e.parentDef,l=Object(F.a)($t,{variables:{shop:t}}),u=l.data,s=l.loading,d=l.error,m=l.refetch;Object(n.useEffect)((function(){m()}),[c,t]);var f={setGridApi:a,columnDefs:o||[{checkboxSelection:!0,width:30},{headerName:"Name",field:"name",sortable:!0}],data:u,loading:s,error:d,multiple:i};return r.a.createElement(oe,f)}function xt(e){var t=e.refetch,a=e.curShop,c=Object(n.useState)(!1),i=Object(f.a)(c,2),o=i[0],l=i[1],d=Object(n.useState)(!1),b=Object(f.a)(d,2),h=b[0],O=b[1],E=Object(n.useState)(""),p=Object(f.a)(E,2),v=p[0],j=p[1],g=Object(x.a)(kt),S=Object(f.a)(g,2),y=S[0],C=S[1].data;Object(n.useEffect)((function(){t(),O(!1),l(!1),j("")}),[C]);var w={showModal:function(){a?l(!0):m.a.error("Must choose a Shop")},handleCancel:function(){l(!1)},handleOk:function(){var e=N({name:v}),t=e.isValid,n=e.error;t?(O(!0),y({variables:{name:v,shop:a}})):m.a.error(n)},btnName:"Add Dish",visible:o,confirmLoading:h};return r.a.createElement(de,w,r.a.createElement(u.a,null,r.a.createElement(u.a.Item,null,r.a.createElement(s.a,{type:"text",onChange:function(e){return j(e.target.value)},value:v,placeholder:"Dish name..."}))))}function Ut(e){var t=e.gridApi,a=e.refetch,c=Object(n.useState)(!1),i=Object(f.a)(c,2),o=i[0],l=i[1],u=Object(x.a)(Mt),s=Object(f.a)(u,2),d=s[0],b=s[1].data;Object(n.useEffect)((function(){a(),l(!1)}),[b]);var h={visible:o,confirmTitle:"Are you sure delete this Dish?",btnName:"Delete Dish",handleDelete:function(){var e=t.getSelectedRows();if(e.length>0){var a=e[0]._id;d({variables:{id:a}}),l(!0)}else m.a.error("Must choose a Dish!")}};return r.a.createElement($e,h)}function Rt(e){var t=e.gridApi,a=e.refetch,c=Object(n.useState)(!1),i=Object(f.a)(c,2),o=i[0],l=i[1],d=Object(n.useState)(!1),b=Object(f.a)(d,2),h=b[0],O=b[1],E=Object(n.useState)(""),p=Object(f.a)(E,2),v=p[0],j=p[1],g=Object(x.a)(Dt),S=Object(f.a)(g,2),y=S[0],C=S[1].data,w=Object(n.useState)(""),A=Object(f.a)(w,2),$=A[0],M=A[1];Object(n.useEffect)((function(){a(),l(!1),O(!1),j("")}),[C]);var k={visible:o,handleEdit:function(){var e=t.getSelectedRows();e.length>0?(e=e[0],j(e.name),M(e._id),l(!0)):m.a.error("Must choose a Dish!")},handleOk:function(){var e=N({name:v}),t=e.isValid,a=e.error;t?(O(!0),y({variables:{id:$,name:v}})):m.a.error(a)},confirmLoading:h,setVisible:l,btnName:"Edit Dish"};return r.a.createElement(St,k,r.a.createElement("form",null,r.a.createElement(u.a.Item,null,r.a.createElement(s.a,{type:"text",onChange:function(e){return j(e.target.value)},value:v,placeholder:"Dish name..."}))))}function _t(e){var t=e.curShop,a=Object(n.useState)(void 0),c=Object(f.a)(a,2),i=c[0],o=c[1],l=Object(n.useState)(!0),u=Object(f.a)(l,2),s=u[0],d=u[1];function m(){d(!s)}return r.a.createElement("div",null,r.a.createElement(xt,{curShop:t,refetch:m}),r.a.createElement(Ut,{gridApi:i,refetch:m}),r.a.createElement(Rt,{gridApi:i,refetch:m}),r.a.createElement(It,{curShop:t,setGridApi:o,doRefetch:s}))}function Lt(e){var t=e.refetch,a=Object(n.useState)(!1),c=Object(f.a)(a,2),i=c[0],o=c[1],l=Object(n.useState)(!1),d=Object(f.a)(l,2),b=d[0],h=d[1],O=Object(n.useState)(""),E=Object(f.a)(O,2),p=E[0],v=E[1],j=Object(x.a)(Et),g=Object(f.a)(j,2),S=g[0],y=g[1].data;Object(n.useEffect)((function(){t(),h(!1),o(!1),v("")}),[y]);var C={showModal:function(){o(!0)},handleCancel:function(){o(!1)},handleOk:function(){var e=N({name:p}),t=e.isValid,a=e.error;t?(h(!0),S({variables:{name:p}})):m.a.error(a)},btnName:"Add Shop",visible:i,confirmLoading:b};return r.a.createElement(de,C,r.a.createElement(u.a,null,r.a.createElement(u.a.Item,null,r.a.createElement(s.a,{type:"text",onChange:function(e){return v(e.target.value)},value:p,placeholder:"Shop name..."}))))}function Tt(){var e=Object(n.useState)(void 0),t=Object(f.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(!0),o=Object(f.a)(i,2),l=o[0],u=o[1],s=Object(n.useState)(""),m=Object(f.a)(s,2),b=m[0],h=m[1];function O(){u(!l)}return"MOD"===w("role")?r.a.createElement(Te.a,{status:"403",title:"403",subTitle:"Sorry, you are not authorized to access this page."}):r.a.createElement("div",null,r.a.createElement(H.a,null,r.a.createElement("h1",null,r.a.createElement(d.a,{type:"shop"})," Shop")),r.a.createElement(ut.a,null,r.a.createElement(st.a,{span:11},r.a.createElement(Lt,{refetch:O}),r.a.createElement(gt,{setCurShop:h,gridApi:a,refetch:O}),r.a.createElement(yt,{gridApi:a,refetch:O}),r.a.createElement(jt,{handleClick:function(){var e=a.getSelectedRows();e.length>0?h(e[0]._id):h("")},setGridApi:c,doRefetch:l})),r.a.createElement(st.a,{span:11,offset:2},r.a.createElement(_t,{curShop:b}))))}function Gt(e){var t=e.setGridApi,a=e.doRefetch,c=Object(F.a)(ee),i=c.data,o=c.loading,l=c.error,u=c.refetch;Object(n.useEffect)((function(){u()}),[a]);var s={setGridApi:t,loading:o,error:l,columnDefs:[{checkboxSelection:!0,width:60},{headerName:"User",field:"user"},{headerName:"Item",field:"item"},{headerName:"Site",field:"site",rowGroup:!0},{headerName:"Confirm",field:"confirmed",width:100},{headerName:"Quantity",field:"quantity",width:100},{headerName:"Note",field:"note",width:100},{headerName:"Booked Date",field:"created_date",rowGroup:!0,width:120}],data:i,pagination:!1};return r.a.createElement("div",null,r.a.createElement(oe,s))}function Pt(e){var t=e.gridApi,a=e.refetch,c=Object(n.useState)(!1),i=Object(f.a)(c,2),o=i[0],l=i[1],u=Object(x.a)(ne),s=Object(f.a)(u,2),d=s[0],b=s[1].data;Object(n.useEffect)((function(){a(),l(!1)}),[b]);var h={visible:o,confirmTitle:"Are you sure delete this Order?",btnName:"Delete Order",handleDelete:function(){if("MOD"!==w("role")){var e=t.getSelectedRows();if(e.length>0){var a=e[0]._id;d({variables:{id:a}}),l(!0)}else m.a.error("Must choose an Order!")}else m.a.error("Sorry, you are not authorized to do this action")}};return r.a.createElement($e,h)}function Bt(){var e=Object(n.useState)(void 0),t=Object(f.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(!0),o=Object(f.a)(i,2),l=o[0],u=o[1];return r.a.createElement("div",null,r.a.createElement(H.a,null,r.a.createElement("h1",null,r.a.createElement(d.a,{type:"order"})," Order")),r.a.createElement(Pt,{gridApi:a,refetch:function(){u(!l)}}),r.a.createElement(Gt,{setGridApi:c,doRefetch:l}))}function Vt(e){var t=e.setGridApi,a=e.doRefetch,c=e.handleClick,i=e.site,o=Object(F.a)(je,{variables:{site:i}}),l=o.data,u=o.loading,s=o.error,d=o.refetch;Object(n.useEffect)((function(){d()}),[a,i]);var m={setGridApi:t,loading:u,error:s,columnDefs:[{checkboxSelection:!0,width:60},{headerName:"Name",field:"name",suppressSizeToFit:!0},{headerName:"Status",field:"status"},{headerName:"Created",field:"created_date"}],data:l,onRowClicked:c,pagination:!1};return r.a.createElement("div",null,r.a.createElement(oe,m))}function qt(e){var t=e.refetch,a=e.gridApi,c=e.setCurMenu,i=Object(n.useState)(!1),o=Object(f.a)(i,2),l=o[0],u=o[1],s=Object(x.a)(Se),d=Object(f.a)(s,2),b=d[0],h=d[1].data;Object(n.useEffect)((function(){t(),u(!1),c("")}),[h]);var O={visible:l,confirmTitle:"Are you sure delete this Menu? This action will delete all items of this Menu!",btnName:"Delete Menu",handleDelete:function(){if("MOD"!==w("role")){var e=a.getSelectedRows();if(e.length>0){if("UNPUBLISHED"!==e[0].status)return void m.a.error("Can not delete Menu after it is published");var t=e[0]._id;b({variables:{id:t}}),u(!0)}else m.a.error("Must choose a Menu!")}else m.a.error("Sorry, you are not authorized to do this action")}};return r.a.createElement($e,O)}var zt=et.a.Option;function Ht(e){var t=e.gridApi,a=e.refetch,c=Object(n.useState)(!1),i=Object(f.a)(c,2),o=i[0],l=i[1],d=Object(n.useState)(!1),b=Object(f.a)(d,2),h=b[0],O=b[1],E=Object(n.useState)(""),p=Object(f.a)(E,2),v=p[0],j=p[1],g=Object(n.useState)("UNPUBLISHED"),S=Object(f.a)(g,2),y=S[0],C=S[1],w=Object(x.a)(ye),A=Object(f.a)(w,2),$=A[0],M=A[1].data,k=Object(n.useState)(""),D=Object(f.a)(k,2),I=D[0],U=D[1];Object(n.useEffect)((function(){a(),l(!1),O(!1),j(""),C("")}),[M]);var R={visible:o,handleEdit:function(){var e=t.getSelectedRows();if(e.length>0){if("BLOCKED"===(e=e[0]).status)return void m.a.error("Can not change Blocked Menu");j(e.name),U(e._id),C(e.status),l(!0)}else m.a.error("Must choose a Menu!")},handleOk:function(){var e=N({name:v}),t=e.isValid,a=e.error;t?(O(!0),$({variables:{id:I,name:v,status:y}})):m.a.error(a)},confirmLoading:h,setVisible:l,btnName:"Edit Menu"};return r.a.createElement(St,R,r.a.createElement("form",null,r.a.createElement(u.a.Item,null,r.a.createElement(s.a,{type:"text",onChange:function(e){return j(e.target.value)},value:v,placeholder:"Menu name..."})),r.a.createElement(u.a.Item,null,r.a.createElement(et.a,{value:y,onChange:function(e){var a=function(e,t,a){var n=a.getRenderedNodes().map((function(e){return e.data.status}));if(t!==e){if("BLOCKED"===t)return{isValid:!1,error:"Menu is BLOCKED!"};if("PUBLISHED"===e&&n.includes("PUBLISHED"))return{isValid:!1,error:"Only one Menu got published at a time!"};if("UNPUBLISHED"===e)return{isValid:!1,error:"Can not unPublish Menu"}}return{isValid:!0}}(e,y,t);a.isValid?C(e):m.a.error(a.error)}},r.a.createElement(zt,{value:"UNPUBLISHED"},"UnPublished"),r.a.createElement(zt,{value:"PUBLISHED"},"Published"),r.a.createElement(zt,{value:"CLOSED"},"Closed"),r.a.createElement(zt,{value:"BLOCKED"},"BLOCKED")))))}function Ft(){var e=Object(E.a)(["\n    mutation UpdateItem($id: String!, $name: String!, $total: Int!){\n        updateItem(id: $id, name: $name, total: $total)\n    }\n"]);return Ft=function(){return e},e}function Kt(){var e=Object(E.a)(["\n    mutation AddItemFromShop($menu: String!, $shop: String!, $items: String!, $total: Int!){\n        addItemFromShop(menu: $menu, shop: $shop, items: $items, total: $total)\n    }\n"]);return Kt=function(){return e},e}function Qt(){var e=Object(E.a)(["\n    mutation AddItem($menu: String!, $name: String!, $total: Int!){\n        addItem(menu: $menu, name: $name, total: $total){\n            _id\n        }\n    }\n"]);return Qt=function(){return e},e}function Yt(){var e=Object(E.a)(["\n    mutation DeleteItem($id: String!){\n        deleteItem(id: $id){\n            name\n        }\n    }\n"]);return Yt=function(){return e},e}function Wt(){var e=Object(E.a)(["\n    query Itemes($menu: String) {\n        items(menu: $menu){\n            _id\n            name\n            shop\n            total\n            booked\n        }\n    }\n"]);return Wt=function(){return e},e}var Jt=Object(p.a)(Wt()),Xt=Object(p.a)(Yt()),Zt=Object(p.a)(Qt()),ea=Object(p.a)(Kt()),ta=Object(p.a)(Ft());function aa(e){var t=e.curMenu,a=e.setGridApi,c=e.doRefetch,i=Object(F.a)(Jt,{variables:{menu:t}}),o=i.data,l=i.loading,u=i.error,s=i.refetch;Object(n.useEffect)((function(){s()}),[c,t]);var d={setGridApi:a,columnDefs:[{checkboxSelection:!0,width:80},{headerName:"Name",field:"name"},{headerName:"Currently Booked",field:"booked"},{headerName:"Total",field:"total"},{headerName:"Cancelled",field:"cancelled"},{headerName:"Shop",field:"shop"}],data:o,loading:l,error:u};return r.a.createElement(oe,d)}function na(e){var t=e.refetch,a=e.curMenu,c=Object(n.useState)(!1),i=Object(f.a)(c,2),o=i[0],l=i[1],d=Object(n.useState)(!1),b=Object(f.a)(d,2),h=b[0],O=b[1],E=Object(n.useState)(""),p=Object(f.a)(E,2),v=p[0],j=p[1],g=Object(n.useState)(1),S=Object(f.a)(g,2),y=S[0],C=S[1],A=Object(x.a)(Zt),$=Object(f.a)(A,2),M=$[0],k=$[1].data;Object(n.useEffect)((function(){t(),O(!1),l(!1),j("")}),[k]);var D={showModal:function(){"MOD"!==w("role")?a?l(!0):m.a.error("Must choose a Menu"):m.a.error("Sorry, you are not authorized to do this action")},handleCancel:function(){l(!1)},handleOk:function(){var e=N({name:v}),t=e.isValid,n=e.error;t?(O(!0),M({variables:{name:v,menu:a,total:y}})):m.a.error(n)},btnName:"Add Item",visible:o,confirmLoading:h};return r.a.createElement(de,D,r.a.createElement(u.a,null,r.a.createElement(u.a.Item,null,r.a.createElement(s.a,{type:"text",onChange:function(e){return j(e.target.value)},value:v,placeholder:"Item name..."}),r.a.createElement(ue.a,{min:1,defaultValue:y,type:"text",onChange:function(e){return C(e)},placeholder:"Total..."}))))}function ra(e){var t=e.gridApi,a=e.refetch,c=Object(n.useState)(!1),i=Object(f.a)(c,2),o=i[0],l=i[1],u=Object(x.a)(Xt),s=Object(f.a)(u,2),d=s[0],b=s[1].data;Object(n.useEffect)((function(){a(),l(!1)}),[b]);var h={visible:o,confirmTitle:"Are you sure delete this Item?",btnName:"Delete Item",handleDelete:function(){if("MOD"!==w("role")){var e=t.getSelectedRows();if(e.length>0){if(e[0].booked>0)return void m.a.error("Can not delete Item when it is booked!");var a=e[0]._id;d({variables:{id:a}}),l(!0)}else m.a.error("Must choose an Item!")}else m.a.error("Sorry, you are not authorized to do this action")}};return r.a.createElement($e,h)}function ca(e){var t=e.gridApi,a=e.refetch,c=Object(n.useState)(!1),i=Object(f.a)(c,2),o=i[0],l=i[1],d=Object(n.useState)(!1),b=Object(f.a)(d,2),h=b[0],O=b[1],E=Object(n.useState)(""),p=Object(f.a)(E,2),v=p[0],j=p[1],g=Object(n.useState)(1),S=Object(f.a)(g,2),y=S[0],C=S[1],A=Object(n.useState)(0),$=Object(f.a)(A,2),M=$[0],k=$[1],D=Object(x.a)(ta),I=Object(f.a)(D,2),U=I[0],R=I[1].data,_=Object(n.useState)(""),L=Object(f.a)(_,2),T=L[0],G=L[1];Object(n.useEffect)((function(){a(),l(!1),O(!1),j(""),k(0),C(1)}),[R]);var P={visible:o,handleEdit:function(){if("MOD"!==w("role")){var e=t.getSelectedRows();e.length>0?(e=e[0],j(e.name),C(e.total),G(e._id),k(e.booked),l(!0)):m.a.error("Must choose an Item!")}else m.a.error("Sorry, you are not authorized to do this action")},handleOk:function(){var e=N({name:v}),t=e.isValid,a=e.error;t?y<M?m.a.error("Amount of Total is less than Booked!"):(O(!0),U({variables:{id:T,name:v,total:y}})):m.a.error(a)},confirmLoading:h,setVisible:l,btnName:"Edit Item"};return r.a.createElement(St,P,r.a.createElement("form",null,r.a.createElement(u.a.Item,null,r.a.createElement(s.a,{type:"text",onChange:function(e){return j(e.target.value)},value:v,placeholder:"Item name..."}),r.a.createElement(ue.a,{min:1,value:y,type:"text",onChange:function(e){return C(e)},placeholder:"Total..."}))))}a(352);var ia=a(137),oa=et.a.Option;function la(e){var t=e.setShop,a=e.shop,n=Object(F.a)(Ot),c=n.loading,i=n.error,o=n.data;return c?r.a.createElement("div",null,r.a.createElement(et.a,{name:"site",placeholder:"Choose Shop...",suffixIcon:r.a.createElement(d.a,{type:"loading"}),style:{width:"100%"}})):(i&&console.error(i),r.a.createElement("div",null,r.a.createElement(et.a,{placeholder:"Choose Shop...",onChange:function(e){return t(e)},value:a||void 0,style:{width:"100%"}},function(e){return e.shops.map((function(e){return r.a.createElement(oa,{key:e._id,value:e._id},e.name)}))}(o))))}function ua(e){var t=e.refetch,a=e.curMenu,c=Object(n.useState)(!1),i=Object(f.a)(c,2),o=i[0],l=i[1],u=Object(n.useState)(!1),s=Object(f.a)(u,2),d=s[0],b=s[1],h=Object(n.useState)(""),O=Object(f.a)(h,2),E=O[0],p=O[1],v=Object(n.useState)(void 0),j=Object(f.a)(v,2),g=j[0],S=j[1],y=Object(n.useState)(1),C=Object(f.a)(y,2),A=C[0],N=C[1],$=Object(x.a)(ea),M=Object(f.a)($,2),k=M[0],D=M[1].data;Object(n.useEffect)((function(){t(),b(!1),l(!1)}),[D]);var I={showModal:function(){"MOD"!==w("role")?a?l(!0):m.a.error("Must choose a Menu"):m.a.error("Sorry, you are not authorized to do this action")},visible:o,handleOk:function(){b(!0);var e=g.getSelectedRows();e.length>0?k({variables:{menu:a,shop:E,items:JSON.stringify(e),total:A}}):m.a.error("Must choose a Dish!")},confirmLoading:d,handleCancel:function(){l(!1)},btnName:"Add From Shop"};return r.a.createElement(de,I,r.a.createElement(la,{setShop:p,shop:E}),r.a.createElement("div",{style:{margin:"15px 0"}}),r.a.createElement(ia.a,{message:"You can choose many Dishes at once by pressing Ctrl + Click",type:"info",showIcon:!0}),r.a.createElement("div",{style:{margin:"15px 0"}}),r.a.createElement(It,{curShop:E,setGridApi:S,multiple:!0}),r.a.createElement("div",{style:{margin:"15px 0"}}),r.a.createElement("b",null,"Default Total: "),r.a.createElement(ue.a,{min:1,value:A,onChange:function(e){return N(e)},placeholder:"Default Total..."}))}var sa=a(73),da=(a(765),a(388).a.Dragger);function ma(e){var t,a=e.curMenu,c=e.refetch,i=Object(n.useState)(!1),o=Object(f.a)(i,2),l=o[0],u=o[1],s=Object(n.useState)(!1),b=Object(f.a)(s,2),h=b[0],O=b[1];var E={showModal:function(){"MOD"!==w("role")?a?u(!0):m.a.error("Must choose a Menu"):m.a.error("Sorry, you are not authorized to do this action")},handleCancel:function(){u(!1)},handleOk:function(){m.a.error("Must choose a file!")},btnName:"Add From Excel",visible:l,confirmLoading:h},p=(t={name:"file",action:"".concat("http://localhost:3001","/item/uploadexcel?menu=").concat(a)},Object(sa.a)(t,"name","file"),Object(sa.a)(t,"headers",{authorization:C()}),Object(sa.a)(t,"accept",".xlsx"),Object(sa.a)(t,"onChange",(function(e){var t=e.file.status;"uploading"!==t&&console.log(e.file,e.fileList),"done"===t?(m.a.success("".concat(e.file.name," file uploaded successfully.")),c(),O(!1),u(!1)):"error"===t&&m.a.error("".concat(e.file.name," file upload failed."))})),t);return r.a.createElement(de,E,r.a.createElement(da,p,r.a.createElement("p",{className:"ant-upload-drag-icon"},r.a.createElement(d.a,{type:"inbox"})),r.a.createElement("p",{className:"ant-upload-text"},"Click or drag file to this area to upload."),r.a.createElement("p",{className:"ant-upload-hint"},"Only support .xlsx file!")))}function fa(e){var t=e.setUserId,a=e.curSite,c=Object(n.useState)(void 0),i=Object(f.a)(c,2),o=i[0],l=i[1],u=Object(F.a)(G,{variables:{site:a}});var s={onRowClicked:function(){var e=o.getSelectedRows();if(e.length>0){var a=e[0]._id;t(a)}else t("")},data:u.data,loading:u.loading,error:u.error,columnDefs:[{checkboxSelection:!0,width:80},{headerName:"Name",field:"name"},{headerName:"Site",suppressSizeToFit:!0,valueGetter:function(e){return e.data.site.name}},{headerName:"Role",field:"role"},{headerName:"Status",field:"status"}],setGridApi:l,height:"200px"};return r.a.createElement(oe,s)}function ba(e){var t=e.gridApi,a=e.curSite,c=e.refetch,i=Object(n.useState)(!1),o=Object(f.a)(i,2),l=o[0],d=o[1],b=Object(n.useState)(!1),h=Object(f.a)(b,2),O=h[0],E=h[1],p=Object(n.useState)(""),v=Object(f.a)(p,2),j=v[0],g=v[1],S=Object(n.useState)(""),y=Object(f.a)(S,2),C=y[0],A=y[1],$=Object(n.useState)(""),M=Object(f.a)($,2),k=M[0],D=M[1],I=Object(n.useState)(1),U=Object(f.a)(I,2),R=U[0],_=U[1],L=Object(n.useState)(0),T=Object(f.a)(L,2),G=T[0],P=T[1],B=Object(x.a)(re),V=Object(f.a)(B,2),q=V[0],z=V[1].data;Object(n.useEffect)((function(){c(),E(!1),d(!1),_(1),D("")}),[z]);var H={showModal:function(){if("MOD"!==w("role")){var e=t.getSelectedRows();if(e.length>0){if((e=e[0]).total-e.booked<=0)return void m.a.error("Item out of stock!");A(e._id),P(e.total-e.booked),d(!0)}else m.a.error("Must choose an Item!")}else m.a.error("Sorry, you are not authorized to do this action")},handleCancel:function(){d(!1)},handleOk:function(){N({user:j}).isValid?(E(!0),q({variables:{user:j,quantity:R,item:C,note:k}})):m.a.error("Must choose a User")},btnName:"Add Order",visible:l,confirmLoading:O};return r.a.createElement(de,H,r.a.createElement(u.a,null,r.a.createElement("b",null,"Choose User:"),r.a.createElement(fa,{setUserId:g,curSite:a}),r.a.createElement("div",{style:{margin:"10px 0"}}),r.a.createElement("b",null,"Quantity: "),r.a.createElement(ue.a,{min:1,max:G,value:R,onChange:function(e){return _(e)},placeholder:"Quantity..."}),r.a.createElement("div",{style:{margin:"10px 0"}}),r.a.createElement(s.a,{type:"text",onChange:function(e){return D(e.target.value)},value:k,placeholder:"Note..."})))}function ha(e){var t=e.curMenu,a=e.curSite,c=e.menuState,i=Object(n.useState)(void 0),o=Object(f.a)(i,2),l=o[0],u=o[1],s=Object(n.useState)(!0),d=Object(f.a)(s,2),b=d[0],h=d[1];function O(){h(!b)}return r.a.createElement("div",{style:{marginTop:"-5px"}},r.a.createElement("div",{onClick:function(e){e.target.classList.contains("unclickable")&&m.a.error("Can not change Items of Blocked or Published Menu")},className:"BLOCKED"===c||"PUBLISHED"===c?"unclickable":""},r.a.createElement(na,{curMenu:t,refetch:O}),r.a.createElement(ua,{curMenu:t,refetch:O}),r.a.createElement(ma,{curMenu:t,refetch:O}),r.a.createElement(ba,{gridApi:l,curSite:a,refetch:O}),r.a.createElement(ra,{gridApi:l,refetch:O}),r.a.createElement(ca,{gridApi:l,refetch:O})),r.a.createElement(aa,{curMenu:t,setGridApi:u,doRefetch:b}))}var Oa=et.a.Option;function Ea(e){var t=e.refetch,a=e.site,c=Object(n.useState)(!1),i=Object(f.a)(c,2),o=i[0],l=i[1],d=Object(n.useState)(!1),b=Object(f.a)(d,2),h=b[0],O=b[1],E=Object(n.useState)(""),p=Object(f.a)(E,2),v=p[0],j=p[1],g=Object(n.useState)("UNPUBLISHED"),S=Object(f.a)(g,2),y=S[0],C=S[1],A=Object(x.a)(ve),$=Object(f.a)(A,2),M=$[0],k=$[1].data;Object(n.useEffect)((function(){t(),O(!1),l(!1),j("")}),[k]);var D={showModal:function(){if("MOD"!==w("role"))if(""!==a){var e=(new Date).toDateString();j("Menu ".concat(e)),l(!0)}else m.a.error("Must choose a Site!");else m.a.error("Sorry, you are not authorized to do this action")},handleCancel:function(){l(!1)},handleOk:function(){var e=N({name:v}),t=e.isValid,n=e.error;t?(O(!0),M({variables:{name:v,site:a,status:y}})):m.a.error(n)},btnName:"Add Menu",visible:o,confirmLoading:h};return r.a.createElement(de,D,r.a.createElement(u.a,null,r.a.createElement(u.a.Item,null,r.a.createElement(s.a,{type:"text",onChange:function(e){return j(e.target.value)},value:v,placeholder:"Menu name..."})),r.a.createElement(u.a.Item,null,r.a.createElement(et.a,{value:y,onChange:function(e){return C(e)}},r.a.createElement(Oa,{value:"UNPUBLISHED"},"UnPublished")))))}var pa=et.a.Option;function va(e){var t=Object(F.a)(qe),a=t.loading,n=t.error,c=t.data;return a?r.a.createElement("div",null,r.a.createElement(et.a,{name:"site",placeholder:"Choose site...",suffixIcon:r.a.createElement(d.a,{type:"loading"}),style:{width:"100%"}})):(n&&console.error(n),r.a.createElement("div",null,r.a.createElement(et.a,{onChange:function(t){return e.setSite(t)},placeholder:"Choose site...",value:e.site||void 0,style:{width:"100%",marginBottom:"5px"}},function(e){return e.sites.map((function(e){return r.a.createElement(pa,{key:e._id,value:e._id},e.name)}))}(c))))}function ja(){return r.a.createElement("div",{style:{marginTop:"20px"}},r.a.createElement(ia.a,{style:{margin:"10px 0"},message:"Only one Menu got Published at a time!",type:"warning",showIcon:!0}),r.a.createElement(ia.a,{style:{margin:"10px 0"},message:"If Menu is CLOSED, only USER can not order!",type:"warning",showIcon:!0}),r.a.createElement(ia.a,{style:{margin:"10px 0"},message:"If Menu is BLOCKED, both ADMIN and MOD can not edit MENU or make orders",type:"warning",showIcon:!0}))}function ga(){var e=Object(n.useState)(void 0),t=Object(f.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)(!0),o=Object(f.a)(i,2),l=o[0],u=o[1],s=Object(n.useState)(""),m=Object(f.a)(s,2),b=m[0],h=m[1],O=Object(n.useState)(""),E=Object(f.a)(O,2),p=E[0],v=E[1],j=Object(n.useState)(""),g=Object(f.a)(j,2),S=g[0],y=g[1];function C(){u(!l),h(""),v("")}return r.a.createElement("div",null,r.a.createElement(H.a,null,r.a.createElement("h1",null,r.a.createElement(d.a,{type:"menu"})," Menu")),r.a.createElement(ut.a,null,r.a.createElement(st.a,{span:11},r.a.createElement(va,{site:S,setSite:y}),r.a.createElement(Ea,{gridApi:a,site:S,refetch:C}),r.a.createElement(qt,{setCurMenu:h,gridApi:a,refetch:C}),r.a.createElement(Ht,{gridApi:a,refetch:C}),r.a.createElement(Vt,{handleClick:function(){var e=a.getSelectedRows();e.length>0?(h(e[0]._id),v(e[0].status)):(h(""),v(""))},setGridApi:c,doRefetch:l,site:S}),r.a.createElement(ja,null)),r.a.createElement(st.a,{span:11,offset:2},r.a.createElement(ha,{curMenu:b,menuState:p,curSite:S}))))}function Sa(){var e=Object(E.a)(["\n    mutation Update($order: String, $closeConfirm: String, $startConfirm: String){\n        updateConfig(order:$order, closeConfirm: $closeConfirm, startConfirm: $startConfirm){\n            closeOrder\n            closeConfirm\n            startConfirm\n        }\n    }\n"]);return Sa=function(){return e},e}function ya(){var e=Object(E.a)(["\n    query{\n        config{\n            closeOrder\n            closeConfirm\n            startConfirm\n        }\n    }\n"]);return ya=function(){return e},e}var Ca=Object(p.a)(ya()),wa=Object(p.a)(Sa()),Aa=a(217),Na=a.n(Aa);function $a(){var e=Object(n.useState)("00:00"),t=Object(f.a)(e,2),a=t[0],c=t[1],i=Object(n.useState)("00:00"),o=Object(f.a)(i,2),u=o[0],s=o[1],b=Object(n.useState)("00:00"),h=Object(f.a)(b,2),O=h[0],E=h[1],p=Object(n.useState)(!0),v=Object(f.a)(p,2),j=v[0],g=v[1],S=Object(F.a)(Ca),y=S.data,C=S.refetch,A=Object(x.a)(wa),N=Object(f.a)(A,2),$=N[0],M=N[1].data;return Object(n.useEffect)((function(){y&&(c(y.config.closeOrder),s(y.config.closeConfirm),E(y.config.startConfirm))}),[y,j]),Object(n.useEffect)((function(){M&&(C(),m.a.success("Saved!"))}),[M]),"MOD"===w("role")?r.a.createElement(Te.a,{status:"403",title:"403",subTitle:"Sorry, you are not authorized to access this page."}):r.a.createElement("div",null,r.a.createElement(H.a,null,r.a.createElement("h1",null,r.a.createElement(d.a,{type:"setting"})," Config")),r.a.createElement(ut.a,{type:"flex",justify:"space-around",align:"middle"},r.a.createElement(st.a,{span:8,style:{textAlign:"center"}},r.a.createElement("h3",null,"Automately close menu at: "),r.a.createElement(Na.a,{time:a,hour24Mode:!0,onChange:function(e){return c(e.formatted24)}})),r.a.createElement(st.a,{span:8,style:{textAlign:"center"}},r.a.createElement("h3",null,"Close confirming at: "),r.a.createElement(Na.a,{time:u,hour24Mode:!0,onChange:function(e){return s(e.formatted24)}})),r.a.createElement(st.a,{span:8,style:{textAlign:"center"}},r.a.createElement("h3",null,"Start confirming at: "),r.a.createElement(Na.a,{time:O,hour24Mode:!0,onChange:function(e){return E(e.formatted24)}}))),r.a.createElement("div",{style:{textAlign:"center",marginTop:"20px"}},r.a.createElement(l.a,{style:{margin:10},type:"primary",onClick:function(){$({variables:{closeConfirm:u,startConfirm:O,order:a}})}},"Save"),r.a.createElement(l.a,{style:{margin:10},type:"danger",onClick:function(){return g(!j)}},"Reset")))}function Ma(e){return r.a.createElement("div",{id:"AdminRouteWrap"},r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"".concat(e.match.url,"/config"),component:$a}),r.a.createElement(o.b,{path:"".concat(e.match.url,"/order"),component:Bt}),r.a.createElement(o.b,{path:"".concat(e.match.url,"/menu"),component:ga}),r.a.createElement(o.b,{path:"".concat(e.match.url,"/shop"),component:Tt}),r.a.createElement(o.b,{path:"".concat(e.match.url,"/site"),component:Je}),r.a.createElement(o.b,{path:"".concat(e.match.url,"/user"),component:lt}),r.a.createElement(o.b,{path:"".concat(e.match.url,"/"),component:lt})),r.a.createElement(Re,null))}var ka=M.a.Sider;function Da(e){var t=e.split("/")[2]||"user";return[String(["","user","site","shop","menu","order","config"].indexOf(t))]}var Ia={overflow:"auto",height:"100vh",position:"fixed",left:0,top:40};function xa(e){return r.a.createElement("div",{id:"LeftBarWrap"},r.a.createElement(ka,{style:Ia},r.a.createElement(k.a,{theme:"dark",mode:"inline",selectedKeys:Da(e.location.pathname)},r.a.createElement("div",{style:{color:"white",padding:"20px 25px",fontWeight:"bold"}},"Hello ",w("name"),"!"),r.a.createElement(k.a.Item,{key:"1"},r.a.createElement(D.b,{to:"/admin/user"},r.a.createElement(d.a,{type:"user"}),r.a.createElement("span",{className:"nav-text"},"User"))),r.a.createElement(k.a.Item,{key:"2"},r.a.createElement(D.b,{to:"/admin/site"},r.a.createElement(d.a,{type:"apartment"}),r.a.createElement("span",{className:"nav-text"},"Site"))),r.a.createElement(k.a.Item,{key:"3"},r.a.createElement(D.b,{to:"/admin/shop"},r.a.createElement(d.a,{type:"shop"}),r.a.createElement("span",{className:"nav-text"},"Shop"))),r.a.createElement(k.a.Item,{key:"4"},r.a.createElement(D.b,{to:"/admin/menu"},r.a.createElement(d.a,{type:"menu"}),r.a.createElement("span",{className:"nav-text"},"Menu"))),r.a.createElement(k.a.Item,{key:"5"},r.a.createElement(D.b,{to:"/admin/order"},r.a.createElement(d.a,{type:"profile"}),r.a.createElement("span",{className:"nav-text"},"Order"))),r.a.createElement(k.a.Item,{key:"6"},r.a.createElement(D.b,{to:"/admin/config"},r.a.createElement(d.a,{type:"setting"}),r.a.createElement("span",{className:"nav-text"},"Config"))))))}a(751);function Ua(e){return r.a.createElement("div",null,r.a.createElement(I,null),r.a.createElement(xa,e),r.a.createElement(Ma,{match:e.match}))}function Ra(e){return y()?r.a.createElement(Le,e):r.a.createElement(o.a,{to:"/login"})}function _a(e){return y()?["ADMIN","MOD"].includes(w("role"))?r.a.createElement(Ua,e):r.a.createElement(Le,e):r.a.createElement(o.a,{to:"/login"})}function La(){return r.a.createElement("div",null,r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"/admin",render:_a}),r.a.createElement(o.b,{path:"/app",render:Ra}),r.a.createElement(o.b,{path:"/login",component:$}),r.a.createElement(o.b,{path:"/",render:function(){return r.a.createElement(o.a,{to:"/app"})}})))}a(752),a(753),a(754);var Ta=function(){return r.a.createElement("div",null,r.a.createElement(La,null))},Ga=a(370),Pa=a(192),Ba=a(369),Va=a(25),qa=a(69),za=a(371),Ha=a(372),Fa=a(386),Ka=a(387),Qa=new Pa.a({uri:"https://lun-app-randy102.herokuapp.com/graphql"}),Ya=Object(Fa.a)((function(e,t){var a=t.headers;return{headers:Object(Xe.a)({},a,{authorization:localStorage.getItem("token")||""})}})),Wa=new Ka.a({uri:"wss://lun-app-randy102.herokuapp.com/graphql",options:{reconnect:!0,reconnectionAttempts:3,connectionParams:function(){return{authorization:localStorage.getItem("token")||""}}}}),Ja=Object(Ba.a)((function(e){var t=e.query,a=Object(Va.e)(t),n=a.kind,r=a.operation;return"OperationDefinition"===n&&"subscription"===r}),Wa,Qa),Xa=qa.a.from([Ya,Ja]),Za=new za.a({link:Xa,cache:new Ha.a});i.a.render(r.a.createElement(Ga.a,{client:Za},r.a.createElement(D.a,null,r.a.createElement(Ta,null))),document.getElementById("root"))}},[[397,1,2]]]);
//# sourceMappingURL=main.3cfe3ae8.chunk.js.map